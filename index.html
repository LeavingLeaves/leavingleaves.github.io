<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>叶的随机小工具</title>
    <style>
        body {
            font-family: monospace;
            margin: 20px;
            font-size: large;
        }

        #result {
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <h2><a href="https://leavingleaves.github.io/Puzzle_Calculator.htm">不暴力不成活</a></h2>
    <h2><a href="https://leavingleaves.github.io/Nutrimatic_Query.html">Nutrimatic Query生成</a></h2>
    <h2><a href="https://leavingleaves.github.io/kuaidula/">快读啦</a></h2>

    <h2>质因数分解</h2>
    <input type="text" id="factNum" placeholder="输入一个数字" onkeydown="factNumEnter(event)">
    <button onclick="factorize()">分解质因数</button>
    <div id="factNumResult"></div>
    <script>
        function factNumEnter(event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                factorize();
            }
        }
        function factorize() {
            let input = document.getElementById("factNum").value;
            let number = parseInt(input);
            if (isNaN(number)) {
                document.getElementById("factNumResult").innerText = "请输入有效的数字。";
                return;
            }
            if (number < 2) {
                document.getElementById("factNumResult").innerText = "质因数分解仅适用于大于等于2的整数。";
                return;
            }
            let factors = [];
            for (let i = 2; i <= number; i++) {
                while ((number % i) === 0) {
                    factors.push(i);
                    number /= i;
                }
            }
            if (factors.length === 0) {
                factors.push(number);
            }
            document.getElementById("factNumResult").innerText = "分解质因数结果为: " + factors.join(" × ");
        }
    </script>

    <h2>字符排序统计</h2>
    <input type="text" id="sortString" placeholder="输入任意字符串" onkeydown="sortStrEnter(event)">
    <button onclick="sortStr()">排序</button>
    <div id="sortStrResult"></div>
    <script>
        function sortStrEnter(event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                sortStr();
            }
        }
        function sortStr() {
            let input = document.getElementById("sortString").value;
            input = input.split('').sort((a, b) => a.charCodeAt() - b.charCodeAt()).join('');
            let stat = input.match(/(.)\1*/g).map(s => [s[0], s.length])
                .sort((a, b) => -a[1] + b[1]);
            stat = Object.fromEntries(stat);
            document.getElementById("sortStrResult").innerText =
                input.split('').sort((a, b) => a - b).join('') + "\n\n" +
                "统计结果:\n" + JSON.stringify(stat, null, '\t');
        }
    </script>

</body>

</html>